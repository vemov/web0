<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Adder API</title>
</head>
<body>
<script>
function getParam(name) {
    const url = new URL(window.location.href);
    return url.searchParams.get(name);
}

function escapeXML(str) {
    return str.replace(/[<>&'"]/g, c => ({
        '<': '&lt;',
        '>': '&gt;',
        '&': '&amp;',
        "'": '&apos;',
        '"': '&quot;'
    }[c]));
}

const a = parseFloat(getParam("a")) || 0;
const b = parseFloat(getParam("b")) || 0;
const sum = a + b;

const xml = `<?xml version="1.0" encoding="UTF-8"?>
<response>
    <a>${a}</a>
    <b>${b}</b>
    <sum>${sum}</sum>
</response>`;
window.parent.postMessage({
    type: "adder-api",
    payload: xml
}, "*");

</script>

</body>
</html>
