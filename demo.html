<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>XML Blob Generator</title>
</head>
<body>

<script>
function getParam(name) {
    const url = new URL(window.location.href);
    return url.searchParams.get(name);
}

const msg = getParam("msg") || "empty";

// XML 转义
function escapeXML(str) {
    return str.replace(/[<>&'"]/g, function(c) {
        return {
            '<': '&lt;',
            '>': '&gt;',
            '&': '&amp;',
            "'": '&apos;',
            '"': '&quot;'
        }[c];
    });
}

const xml = `<?xml version="1.0" encoding="UTF-8"?>
<response>
    <message>${escapeXML(msg)}</message>
</response>`;

// 创建真正的 XML Blob
const blob = new Blob([xml], { type: "application/xml" });
const url = URL.createObjectURL(blob);

// 打开新标签页
window.open(url);
</script>

</body>
</html>
